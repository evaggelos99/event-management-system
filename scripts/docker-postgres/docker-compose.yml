services:
  postgres:
    image: postgres
    ports:
      - 5433:5432
    environment:
      - POSTGRES_PASSWORD=pass
      - POSTGRES_USER=user
      - POSTGRES_DB=event-management-system
    volumes:
      - ./schema.sql:/docker-entrypoint-initdb.d/schema.sql
      - ./triggers-and-functions.sql:/docker-entrypoint-initdb.d/triggers-and-functions.sql
  pgadmin:
    image: dpage/pgadmin4
    environment:
      - PGADMIN_DEFAULT_EMAIL=admin@pgadmin.com
      - PGADMIN_DEFAULT_PASSWORD=admin
      - PGADMIN_LISTEN_PORT=80
    ports:
      - 3131:80
    depends_on:
      - postgres